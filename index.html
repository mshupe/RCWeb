<!DOCTYPE html> 
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<title>Rain Commander</title> 

	<link rel="stylesheet" href="styles/jquery.mobile-1.2.0.css" />
	<link rel="stylesheet" href="styles/RC.css" />
    <link href="styles/mobiscroll.datetime-2.4.1.min.css" rel="stylesheet" type="text/css" />

    <script src="js/json2.js"></script>
    <script src="js/jquery.js"></script>
    <script src="js/jquery.mobile-1.2.0.js"></script>
    <script src="js/jquery.cookie.js"></script>
    <script src="js/jquery.validate.js"></script>
    <script src="js/additional-methods.js"></script>
    <script src="js/controller.js"></script>
	<script src="js/mobiscroll.datetime-2.4.1.min.js" type="text/javascript"></script>
	
</head> 

<body>
<div data-role="page" id="pageWelcome">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
		<div style="text-align: center"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></div>
	</div>

	<div id="divWelcome" class="content" data-role="content" align="center">
        <ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">
            <li><h2 style="text-align: center">Welcome to RainCommander</h2><p style="text-align: center; font-size: medium;">Login or Register to access your RainCommander controller</p></li>
        </ul> 
		<p>
        <a href="#" data-role="button" data-inline="true" data-theme="b">Login</a>
		<a href="#pageRegister" data-role="button" data-inline="true" data-theme="b">Register</a></p>
	</div>

</div>

<div id="pageLogin" data-role="page" data-theme="b">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
		<div style="text-align: center"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></div>
	</div>
    
	<div class="content" data-role="content">

	<form id="frmLogin">
        <div class="ui-body ui-body-a ui-corner-all" >
            <label id="lblLoginError" class="rcErrorLabel"></label>
            <div data-role="fieldcontain">
                <label for="loginUsername"><em>* </em> Email:</label>
		        <input type="text" id="loginUsername" value="" placeholder="Email" data-inline="true" data-theme="a" class="required, email"/>
            </div>
            <div data-role="fieldcontain">
		        <label for="loginPassword"><em>* </em> Password:</label>
		        <input type="password" id="loginPassword" value="" placeholder="Password" data-inline="true" data-theme="a" class="required" minlength=5 />
            </div>
		        
            <a data-role="button" data-inline="true" data-theme="b" onclick="LoginClick()">Login</a>
		    <a href="#pageForgotPassword" data-role="button" data-inline="true" data-theme="b" >Forgot Password?</a>
        </div>
	</form>
    </div>
</div>

<div id="pageRegister" data-role="page" data-theme="a">
    <img src="images/Grass_Sky.jpg" style="width: 1200px; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
		<div style="text-align: center"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></div>
	</div>

	<div class="content" data-role="content">
	    <form id="frmRegister">
            <div class="ui-body ui-body-a ui-corner-all" >
                <label id="lblRegisterError" class="rcErrorLabel"></label>		    
                <div data-role="fieldcontain">
                    <label for="regUsername"><em>* </em> Email:</label>
	    	        <input type="text" id="regUsername" value="" placeholder="email" data-theme="a" data-inline="true" class="required, email" />
                </div>
                <div data-role="fieldcontain">
    		        <label for="regPassword"><em>* </em> Password:</label>
	    	        <input type="password" id="regPassword" value="" placeholder="password" data-theme="a" data-inline="true" class="required" minlength=5 />
                </div>
                <div data-role="fieldcontain">
                    <label for="regFirstName">First:</label>
	    	        <input type="text" id="regFirstName" value="" placeholder="First Name" data-theme="a" data-inline="true" />
                </div>
                <div data-role="fieldcontain">
                    <label for="regLastName">Last:</label>
	    	        <input type="text" id="regLastName" value="" placeholder="Last Name" data-theme="a" data-inline="true" />
                </div>
                <div data-role="fieldcontain">
                    <label for="regPhone">Phone:</label>
	    	        <input type="text" id="regPhone" value="" placeholder="Phone" data-theme="a" data-inline="true" />
                </div>
                <div data-role="fieldcontain">
                    <label for="regAddress"><em>* </em> Address:</label>
	    	        <input type="text" id="regAddress" value="" placeholder="Address" data-theme="a" data-inline="true" class="required" />
                </div>
                <div data-role="fieldcontain">
                    <label for="regCity"><em>* </em> City:</label>
	    	        <input type="text" id="regCity" value="" placeholder="City" data-theme="a" required=true />
                </div>
                <div data-role="fieldcontain">
                    <label for="regState"><em>* </em> State:</label>
	    	        <input type="text" id="regState" value="" placeholder="State" data-theme="a" class="required" />
                </div>
                <div data-role="fieldcontain">
                    <label for="regZip"><em>* </em> Zip:</label>
	    	        <input type="text" id="regZip" value="" placeholder="Zip" data-theme="a" class="required" />
                </div>
		        <a data-role="button" data-inline="true" data-theme="b" onclick="Register()">Register</a>
            </div>
	    </form>
    </div>
</div>

<div data-role="page" id="pageForgotPassword" data-theme="a" data-history="false" >
    <img src="images/Grass_Sky.jpg" style="width: 1200px; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
	</div>

	<div class="content" data-role="content">
	    <form id="Form1">
            <div class="ui-body ui-body-a ui-corner-all" >
                <label id="lblForgotPasswordError" class="rcErrorLabel"></label>
                <p></p>
                <label>Sorry Beta Testors... once your password has been reset you will need to reset your contrller and reconnect it to your wifi network. This will go away once I reprogram your controller.</label>
                <div id="divForgotPasswordFields" data-role="fieldcontain">
                    <label for="forgotUsername"><em>* </em> Email:</label>
		            <input type="text" id="forgotUsername" value="" placeholder="Email" data-inline="true" data-theme="a" class="required, email"/>
                </div>
		        <a id="requestButton" data-role="button" data-inline="true" data-theme="b" onclick="RequestPasswordReset()">Reset Password</a>
            </div>
	    </form>
    </div>
</div>


<div data-role="page" id="pageMain" data-theme="b">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
	</div>

	<div class="content" data-role="content">
        <label id="lblPageMainError" class="rcErrorLabel"></label>
        <div id="divStatus" >
            <ul id="lvStatus" data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b"></ul> 
        </div>

        <div style="text-align: center">
            <a href="#pageConfigureController" data-role="button" data-inline="true" >Configure</a>
            <a href="#pageRun" data-role="button" data-inline="true">Make It Rain!</a>
            <a href="#pageHistory" data-role="button" data-inline="true">History</a>
        </div>
	</div>

    <div id="dlgPause" data-role="popup" data-theme="a" class="ui-corner-all">
        <a href="#" data-rel="back" data-role="button" data-theme="b" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
	    <form>
		    <div style="padding:10px 20px;">
                <div id="divPauseMsg">Pause Controller?</div>
    		        <div data-role="fieldcontain" id="divPauseFields">
				    <select id="selPauseDuration" data-native-menu="false">
					    <option value="1440">One Day</option>
					    <option value="2880">Two Days</option>
					    <option value="4320">Three Days</option>
					    <option value="10080">Seven Days</option>
				    </select>
                </div>
		        <a data-role="button" data-inline="true" data-theme="b" onclick="SendPauseCommand()">Yes</a>
		        <a data-role="button" data-inline="true" data-theme="b" href="#" data-rel="back">No</a>
		    </div>
	    </form>
    </div>
    <div id="dlgPlay" data-role="popup" data-theme="a" class="ui-corner-all">
        <a href="#" data-rel="back" data-role="button" data-theme="b" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
	    <form>
		    <div style="padding:10px 20px;">
                <div>Run Controller?</div>
		        <a data-role="button" data-inline="true" data-theme="b" onclick="SendPlayCommand()">Yes</a>
		        <a data-role="button" data-inline="true" data-theme="b" href="#" data-rel="back">No</a>
		    </div>
	    </form>
    </div>

    <div data-role="popup" id="dlgSelectController">
    </div>

	<div data-role="footer" data-position="fixed" data-theme="b" class="ui-bar">
		<div style="margin: 4px; text-align: center">
            <img src="images/RC_Logo_Water.png" class="classFooterLogo" />
        </div>
	</div>
</div>

<div data-role="page" id="pageNoControllers" data-theme="b">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
	</div>

	<div class="content" data-role="content">
        <div id="div3" style="position: fixed;">
            <p></p>
            <ul id="Ul2" data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">
                <li><h2 style="text-align: center">You are now ready to set up a RainCommander controller</h2>
                <p></p>
                <p style="text-align: center; font-size: medium;">Click <a href="configure.htm" >here</a> to get started</p></li>
            </ul> 
        </div>
	</div>
	<div data-role="footer" data-position="fixed" data-theme="b" class="ui-bar">
		<div style="margin: 4px; text-align: center">
            <img src="images/RC_Logo_Water.png" class="classFooterLogo" />
        </div>
	</div>
</div>

<div data-role="page" id="pageValidateController" data-theme="b">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
	</div>

	<div class="content" data-role="content">
        <p></p>
        <ul id="Ul1" data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">
            <li><h2 style="text-align: left">Waiting for controller to connect to the RC server...</h2>
            <p></p>
            <p style="text-align: center; font-size: medium;">Click refresh button to check again (adding timer - stay tuned)</p>
            <p style="text-align: center; font-size: medium;">If controller has not connect in 30 seconds</p>
            <p style="text-align: center; font-size: medium;">press and hold the mode button on the controller for </p>
            <p style="text-align: center; font-size: medium;">5 seconds and click <a href="configure.htm" >here</a> to reconfigure</p></li>
        </ul> 
	</div>
	<div data-role="footer" data-position="fixed" data-theme="b" class="ui-bar">
		<div style="margin: 4px; text-align: center">
            <img src="images/RC_Logo_Water.png" class="classFooterLogo" />
        </div>
	</div>
</div>

<div data-role="page" id="pageRun" data-theme="b">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
	</div>

	<div class="content" data-role="content">
		<form action="#" method="get">
            <div id="divRunSchedules"></div>
            <p></p>
            <div id="divRunZones"></div>
        </form>
	</div>

	<div data-role="footer" data-position="fixed" data-theme="b" class="ui-bar">
        <a href="#pageConfigureController" data-direction="reverse" data-theme="a" data-icon="gear" data-role="button">Configure</a>
	</div>

    <div id="confirmRunSchedule" data-role="popup" data-theme="a" class="ui-corner-all">
	    <form>
		    <div id="divConfirmScheduleContent"  style="padding:10px 20px;"></div>
	    </form>
    </div>
    <div id="confirmRunZone" data-role="popup" data-theme="a" class="ui-corner-all">
	    <form>
		    <div id="divConfirmZoneContent" style="padding:10px 20px;"></div>
	    </form>
    </div>

</div>


<div data-role="page" id="pageConfigureAccount" data-theme="a">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
		<div data-role="navbar">
			<ul>
				<li><a href="#pageConfigureController">Controller</a></li>
				<li><a href="#pageConfigureZones">Zones</a></li>
				<li><a href="#pageConfigureSchedules">Schedules</a></li>
				<li><a href="#" class="ui-btn-active ui-state-persist">Account</a></li>
			</ul>
		</div><!-- /navbar -->
	</div>
	<div class="content" data-role="content">
        <ul id="lvAccount" data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b" >
            <li data-role="list-divider" id="li2">Account Information</li>
            <li id="li4">
                <div class="ui-grid-a">
                    <div class="ui-block-a" style="width: 400px">Login<br /><label class="rclabel" id="lblCurrentUser" style="padding-left: 10px"></label></div>
                    <div class="ui-block-b" style="width: 30px">
                        <a data-role="button" data-inline="true" href="#pageChangePassword" data-theme="b" data-mini="true">Change Password</a>
                        <a data-role="button" data-inline="true" href="#pageWelcome" data-mini="true" data-theme="b" onclick="Logout()">Logout</a>
                    </div>
                </div>
            </li>
            <li id="li5">
                <div class="ui-grid-a">
                    <div class="ui-block-a" style="width: 400px">Contact Info<br />
                        <label class="rclabel" id="lblNameOnAccount" style="padding-left: 10px"></label>
                        <br /><label class="rclabel" id="lblPhone" style="padding-left: 10px"></label>
                    </div>
                    <div class="ui-block-b" style="width: 30px"><a data-role="button" data-inline="true" href="#pageEditContact" data-theme="b" data-mini="true">Edit Contact</a></div>
                </div>
            </li>
            <li id="li3">
                <div class="ui-grid-a">
                    <div class="ui-block-a" style="width: 400px">Address<br />
                        <div style="padding-left: 10px">
                            <label class="rclabel" id="lblAccountAddress"></label>
                        </div>
                    </div>
                    <div class="ui-block-b" style="width: 30px"><a data-role="button" data-inline="true" href="#pageEditAccountAddress" data-theme="b" data-mini="true">Edit Address</a></div>
                </div>
            </li>
        </ul> 
	</div>
</div>

<div data-role="page" id="pageChangePassword" data-theme="a" >
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
	</div>

	<div class="content" data-role="content">
	    <form>
            <div class="ui-body ui-body-a ui-corner-all" >
                <p><label id="lblChangePasswordError" class="rcErrorLabel"></label></p>
                <div data-role="fieldcontain">
    		        <label for="currentPass">Current:</label>
	    	        <input type="password" name="currentPass" id="currentPass" value="" placeholder="Current Password" data-inline="true"  data-theme="a" />
                </div>
                <div data-role="fieldcontain">
    		        <label for="newPass">New:</label>
	    	        <input type="password" name="newPass" id="newPass" value="" placeholder="New Password" data-inline="true"  data-theme="a" />
                </div>
                <div data-role="fieldcontain">
		            <label for="confirmNewPass">Confirm:</label>
    		        <input type="password" name="confirmNewPass" id="confirmNewPass" value="" placeholder="Confirm Password" data-inline="true"  data-theme="a" />
                </div>

    		    <a data-role="button" data-inline="true" data-theme="b" onclick="ChangePasswordClick()">Change</a>
    		    <a data-role="button" data-inline="true" data-theme="b" href="#pageConfigureAccount">Cancel</a>
		    </div>
	    </form>
    </div>
</div>

<div data-role="page" id="pageEditContact"  data-theme="a" class="ui-corner-all" style="padding:10px 20px;">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
	</div>

	<div class="content" data-role="content">
	    <form>
            <div class="ui-body ui-body-a ui-corner-all" >
                <p><label id="dlgEditContact" class="rcErrorLabel"></label></p>
                <div data-role="fieldcontain">
	    	        <label for="editFirstName">First Name:</label>
    		        <input type="text" name="editFirstName" id="editFirstName" value="" placeholder="First Name" data-inline="true"  data-theme="a" />
                </div>
                <div data-role="fieldcontain">
		            <label for="editLastName">Last Name:</label>
		            <input type="text" name="editLastName" id="editLastName" value="" placeholder="Last Name" data-inline="true"  data-theme="a" />
                </div>
                <div data-role="fieldcontain">
		            <label for="editPhone">Phone:</label>
		            <input type="text" name="editPhone" id="editPhone" value="" placeholder="Phone" data-inline="true"  data-theme="a" />
                </div>
		    </div>
    		<a data-role="button" data-inline="true" data-theme="b" onclick="SaveContact()">Save</a>
    		<a data-role="button" data-inline="true" data-theme="b" href="#pageConfigureAccount">Cancel</a>
	    </form>
    </div>
</div>

<div data-role="page" id="pageEditAccountAddress"  data-theme="a">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
	</div>

	<div class="content" data-role="content">
	    <form>
            <div class="ui-body ui-body-a ui-corner-all" >
                <p><label id="lblEditAccountAddressError" class="rcErrorLabel"></label></p>
                <div data-role="fieldcontain">
                    <label for="editAddress">Address:</label>
	    	        <input type="text" name="editAddress" id="editAddress" value="" placeholder="Address" data-theme="a" data-inline="true" />
                </div>
                <div data-role="fieldcontain">
                    <label for="editCity">City:</label>
	    	        <input type="text" name="editCity" id="editCity" value="" placeholder="City" data-theme="a" />
                </div>
                <div data-role="fieldcontain">
                    <label for="editState">State:</label>
    		        <input type="text" name="editState" id="editState" value="" placeholder="State" data-theme="a" />
                </div>
                <div data-role="fieldcontain">
                    <label for="editZip">Zip:</label>
    		        <input type="text" name="editZip" id="editZip" value="" placeholder="Zip" data-theme="a" />
                </div>
            </div>
    		<a data-role="button" data-inline="true" data-theme="b" onclick="SaveAccountAddress()">Save</a>
    		<a data-role="button" data-inline="true" data-theme="b" href="#pageConfigureAccount">Cancel</a>
    	</form>
	</div>
</div>


<div data-role="page" id="pageConfigureController" data-theme="a">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
		<div data-role="navbar">
			<ul>
				<li><a href="#pageConfigureController"  class="ui-btn-active ui-state-persist">Controller</a></li>
				<li><a href="#pageConfigureZones">Zones</a></li>
				<li><a href="#pageConfigureSchedules">Schedules</a></li>
				<li><a href="#pageConfigureAccount">Account</a></li>
			</ul>
		</div><!-- /navbar -->

	</div>

	<div class="content" data-role="content">
        <ul id="lvController" data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">
            <li data-role="list-divider" id="liConfigureController">Name</li>
            <li id="liConfigureControllerDetail">
	            <form>
                    <label class="rclabel" id="lblConfigMAC"></label><br />
                    <label class="rclabel" id="lblConfigVersion"></label><br />
                    <a href="configure.htm">Configure WIFI</a>
                </form>
            </li>
            <li>
	            <form>
		            <div style="padding:10px 20px;">
                        <label for="txtControllerName">Controller Name:</label>
		                <input type="text" name="txtControllerName" id="txtControllerName" value="" data-theme="a" />
    			        <label for="selTimeZone" class="select">Time Zone:</label>
	    		        <select id="selTimeZone" data-native-menu="false" >
		    		        <option value="Pacific">Pacific</option>
			    	        <option value="Arizona">Arizona</option>
				            <option value="Mountain">Mountain</option>
    				        <option value="Central">Central</option>
	    			        <option value="Eastern">Eastern</option>
    			        </select>
		                <a data-role="button" data-inline="true" data-theme="b" onclick="UpdateController()">Update</a>
		            </div>
	            </form>
            </li>
        </ul> 
	</div>
</div>

<div data-role="page" id="pageConfigureZones" data-theme="a">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
		<div data-role="navbar">
			<ul>
				<li><a href="#pageConfigureController">Controller</a></li>
				<li><a href="#" class="ui-btn-active ui-state-persist">Zones</a></li>
				<li><a href="#pageConfigureSchedules">Schedules</a></li>
				<li><a href="#pageConfigureAccount">Account</a></li>
			</ul>
		</div><!-- /navbar -->

	</div>

	<div id="divConfigureZones" class="content" data-role="content"></div>


</div>

<div data-role="page" id="pageZoneDetail" data-theme="b" >
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
	</div>

	<div class="content" data-role="content">
	    <form>
            <div class="ui-body ui-body-a ui-corner-all" >

            <input type="hidden" id="txtZoneNumber" value="" />
            <label for="txtZoneName">Zone Name:</label>
            <input type="text" id="txtZoneName" value="" />
			<label for="cbZoneEnabled">Enabled</label>
			<input type="checkbox" id="cbZoneEnabled" class="custom" />
		    <a data-role="button" data-inline="true" data-theme="b" onclick="UpdateZone()">Update</a>
		    <a data-role="button" data-direction="reverse" data-inline="true" data-theme="b" onclick="$.mobile.changePage('#pageConfigureZones');">Cancel</a>
        </div>
        </form>
    </div>
</div>

<div data-role="page" id="pageConfigureSchedules" data-theme="a" >
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
		<div data-role="navbar">
			<ul>
				<li><a href="#pageConfigureController">Controller</a></li>
				<li><a href="#pageConfigureZones">Zones</a></li>
				<li><a href="#" class="ui-btn-active ui-state-persist">Schedules</a></li>
				<li><a href="#pageConfigureAccount">Account</a></li>
			</ul>
		</div><!-- /navbar -->

	</div>

    <div id="divConfigureSchedules" class="content" data-role="content"></div>

</div>

<div data-role="page" id="pageHistory" data-theme="a">
    <img src="images/Grass_Sky.jpg" style="width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;" />
	<div data-role="header" data-theme="b" data-position="fixed">
        <a href="index.html" data-direction="reverse" data-theme="a" class="ui-btn-left" data-icon="home" data-iconpos="notext">Home</a>
		<div style="text-align: center"><a href="index.html"><img src="images/RC_Logo_Words.png" class="classHeaderLogo" /></a></div>
	</div>
	<div id="divScheduleHistory" data-role="content" style="text-align: center; color: #000000;">
        <ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">
            <li data-role="list-divider">Coming soon! Test data below....</li>
            <li data-role="list-divider">Monday, August 5, 2013 <span class="ui-li-count">2</span></li>
            <li>
                <h2>Run Schedule - Summer</h2>
                <p><strong>Start Time - 9:00 PM</strong></p>
                <p><strong>Duration - 80 Minutes</strong></p>
            </li>
            <li>
                <h2>Run Schedule - Test</h2>
                <p><strong>Start Time - 11:00 PM</strong></p>
                <p><strong>Duration - 10 Minutes</strong></p>
            </li>
            <li data-role="list-divider">Tuesday, August 6, 2013 <span class="ui-li-count">1</span></li>
            <li>
                <h2>Run Schedule - Summer</h2>
                <p><strong>Start Time - 9:00 PM</strong></p>
                <p><strong>Duration - 80 Minutes</strong></p>
            </li>
        </ul>
	</div>
</div>

<div data-role="page" id="pageScheduleDetail" data-theme="b" >
	<div class="content" data-role="content">
	    <form>
            <div class="ui-body ui-body-a ui-corner-all" >
                <input type="hidden" id="txtScheduleNumber" value="" />
                <label for="txtScheduleName">Schedule Name:</label>
                <input type="text" id="txtScheduleName" value="" />
			    <label for="cbScheduleEnabled">Enabled</label>
			    <input type="checkbox" id="cbScheduleEnabled" class="custom" />

                <label for="startTime" data-inline="true">Start Time:</label>            
                <input name="startTime" id="startTime" class="i-txt" data-inline="true"  />

                <label for="selectScheduleType">Type</label>
		        <select id="selectScheduleType" data-native-menu="false" data-theme="b">
				    <option value="1" selected="selected">Even Days</option>
				    <option value="2">Odd Days</option>
				    <option value="3">Every Day</option>
				    <option value="4">Custom</option>
		        </select>

		        <div id="divCustomDays" style="display:none;">
                    <label for="selectCustomDays" class="select">Custom Days:</label>
		            <select id="selectCustomDays" multiple="multiple" data-native-menu="false">
			            <option>Select Specific Days</option>
			            <option value="Su">Sunday</option>
			            <option value="Mo">Monday</option>
			            <option value="Tu">Tuesday</option>
			            <option value="We">Wednesday</option>
			            <option value="Th">Thursday</option>
			            <option value="Fr">Friday</option>
			            <option value="Sa">Saturday</option>
		            </select>
                </div>

		        <div id="divScheduleDetailZoneDuration" data-role="fieldcontain"></div>

		        <a data-role="button" data-inline="true" data-theme="b" onclick="UpdateSchedule()">Update</a>
		        <a data-role="button" data-direction="reverse" data-inline="true" data-theme="b" onclick="$.mobile.changePage('#pageConfigureSchedules');">Cancel</a>
            </div>
        </form>
	</div>


</div>

<script>
    //var ResetPasswordRequest = 0;

    $("#pageWelcome").bind({
        pagebeforeshow : function (event, ui) 
        {
            $('#divWelcome').empty();
            var welcomeHTML = '';

            var savedUser = $.cookie("savedUser");
            var savedPassword = $.cookie("savedPassword");
            if (savedUser !== undefined && savedUser.toString() != "")
            {
                // Update welcome html
                welcomeHTML = '<ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">' +
                                '<li><h2 style="text-align: center">Welcome back ' + savedUser.toString() + '</h2></li></ul>';
                $('#divWelcome').append(welcomeHTML).trigger('create');
                // Set a timeout so the loading dialog is displayed
                window.setTimeout("ShowLoginLoading()", 100);
                return;
            }
            welcomeHTML = '<ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="b">' +
                          '<li><h2 style="text-align: center">Welcome to RainCommander</h2><p style="text-align: center; font-size: medium;">Login or Register to access your RainCommander controller</p></li>' +
                          '</ul>' + 
		                  '<p><a href="#pageLogin" data-role="button" data-inline="true" data-theme="b">Login</a>' + 
		                  '<a href="#pageRegister" data-role="button" data-inline="true" data-theme="b">Register</a></p>';
            
            $('#divWelcome').append(welcomeHTML).trigger('create');
        }
    });

    function ShowLoginLoading()
    {
        var savedUser = $.cookie("savedUser");
        var savedPassword = $.cookie("savedPassword");
        Login(savedUser, savedPassword, "Loading Data...");
    }

    $("#pageLogin").bind({
        pagebeforeshow: function (event, ui) { 
            $('#lblLoginError').html(""); 
            $('#loginUsername').val(""); 
            $('#loginPassword').val(""); 
            
            //ResetPasswordRequest = 0;
            loginValidator.resetForm();
        },
        pagehide: function () {
            // If a password reset is requested open up the dialog
            //if (ResetPasswordRequest == 1)
            //    setTimeout(function () { $('#pageForgotPassword').popup('open') }, 100);
        }
    });

    $("#pageForgotPassword").bind({
        pagebeforeshow: function (event, ui) { 
            $('#lblForgotPasswordError').html(""); 
            $('#forgotUsername').html(""); 
            $('#forgotUsername').textinput('enable');
            $('#requestButton').removeClass('ui-disabled');
        }
    });

    $("#pageRegister").bind({
        pagebeforeshow: function (event, ui) {
            $('#lblRegisterError').html(""); 
            $('#regUsername').val('');
            $('#regPassword').val('');
            $('#regFirstName').val('');
            $('#regLastName').val('');
            $('#regPhone').val('');
            $('#regAddress').val('');
            $('#regCity').val('');
            $('#regState').val('');
            $('#regZip').val('');
            
            registerValidator.resetForm();
        }
    });


    $("#pageMain").bind({

        pagebeforeshow: function (event, ui) {
            var user = $.cookie("savedUser");

            // Make sure a user is logged in
            if (user === undefined || user == "") {
                $.mobile.changePage("#pageWelcome");
                return;
            }

            // If the user hits refresh we will not have user data or controllers so go get it....
            if (UserInfo && UserInfo.toString() == "undefined") {
                $.mobile.changePage("#pageWelcome");
                return;
            }
            else {
                // Set up the timer
                if (timerUpdateSeconds != null) {
                    clearInterval(timerUpdateSeconds);
                    timerUpdateSeconds = null;
                }
                RefreshStatus();

                // Set up a timer to refresh seconds if we have valid schedule or zone seconds
                timerUpdateSeconds = setInterval(MainPageSecondTimer, 1000);
            }
        },
        pagehide: function (event, ui) {
            if (timerUpdateSeconds != null) {
                clearInterval(timerUpdateSeconds);
                timerUpdateSeconds = null;
            }
        }
    });

    $("#pageConfiguredController").bind({
        pagebeforeshow: function (event, ui) { 

            // Set up a callback to check if the controller has been configured correctly
            validateControllerCount = 0;
            window.setTimeout("LookForController()", 2000);
        },
        pagehide: function () {
            if (timerValidateController != null) {
                clearInterval(timerValidateController);
                timerValidateController = null;
            }
        }
    });


    $("#pageConfigureZones").bind({
        pagebeforeshow: function (event, ui) {
            var user = $.cookie("savedUser");

            // Make sure a user is logged in
            if (user === undefined || user == "") {
                $.mobile.changePage("#pageWelcome");
                return;
            }

            // Make sure we have controller data
            if (!Controller || Controller === null) {
                $.mobile.changePage("#pageMain");
                return;
            }
            
            PageConfigureZoneRefresh();
        }
    });
    
    $("#pageConfigureSchedules").bind({
        pagebeforeshow: function (event, ui) {
            var user = $.cookie("savedUser");
            // Make sure a user is logged in
            if (user == "") {
                $.mobile.changePage("#pageWelcome");
                return;
            }

            // Make sure we have controller data
            if (!Controller || Controller === null) {
                $.mobile.changePage("#pageMain");
                return;
            }

            PageConfigureScheduleRefresh();
        }
    });

    $("#pageHistory").bind({
        pagebeforeshow: function (event, ui) {
            var user = $.cookie("savedUser");
            // Make sure a user is logged in
            if (user == "") {
                $.mobile.changePage("#pageWelcome");
                return;
            }

            // Make sure we have controller data
            if (!Controller || Controller === null) {
                $.mobile.changePage("#pageMain");
                return;
            }

            PageScheduleHistoryRefresh();
        }
    });

    $("#pageScheduleDetail").bind({
        pagebeforeshow: function (event, ui) {
            var user = $.cookie("savedUser");
            // Make sure a user is logged in
            if (user == "") {
                $.mobile.changePage("#pageWelcome");
                return;
            }

            // Make sure we have controller data
            if (!Controller || Controller === null) {
                $.mobile.changePage("#pageMain");
                return;
            }

            PageScheduleDetailRefresh();
        }
    });

    $("#dlgOther").bind({
        popupbeforeposition: function (event, ui) { $('#lblOtherError').html(""); }
    });

    $("#pageRun").bind({
        pagebeforeshow: function (event, ui) {
            var user = $.cookie("savedUser");
            // Make sure a user is logged in
            if (user == "") {
                $.mobile.changePage("#pageWelcome");
                return;
            }

            // Make sure we have controller data
            if (Controller == null) {
                $.mobile.changePage("#pageMain");
                return;
            }
            PageRunRefresh();
        },
    });


$("#pageConfigureAccount").bind({
    pagebeforeshow: function (event, ui) {
            var user = $.cookie("savedUser");
        // Make sure a user is logged in
        if (user == "") {
            $.mobile.changePage("#pageWelcome");
            return;
        }
        RefreshAccountInfo();
    }
});

$("#dlgEditContact").bind({
    popupafteropen: function (event, ui) {
        $('#editFirstName').val(UserInfo.FirstName);
        $('#editLastName').val(UserInfo.LastName);
        $('#editPhone').val(UserInfo.Phone);
    }
});

$("#dlgEditAccountAddress").bind({
    popupafteropen: function (event, ui) {
        $('#editAddress').val(UserInfo.Address);
        $('#editCity').val(UserInfo.City);
        $('#editState').val(UserInfo.State);
        $('#editZip').val(UserInfo.Zip);
    }
});


$("#pageConfigureController").bind({
    pagebeforeshow: function (event, ui) {
        var user = $.cookie("savedUser");
        // Make sure a user is logged in
        if (user == "") {
            $.mobile.changePage("#pageWelcome");
            return;
        }

        // Make sure we have controller data
        if (Controller == null) {
            $.mobile.changePage("#pageMain");
            return;
        }

        $('#txtControllerName').val(Controller.Name);

        if (Controller.TimeZoneName == "Pacific")
            $('select#selTimeZone')[0].selectedIndex = 0;
        else if (Controller.TimeZoneName == "Arizona")
            $('select#selTimeZone')[0].selectedIndex = 1;
        else if (Controller.TimeZoneName == "Mountain")
            $('select#selTimeZone')[0].selectedIndex = 2;
        else if (Controller.TimeZoneName == "Central")
            $('select#selTimeZone')[0].selectedIndex = 3;
        else if (Controller.TimeZoneName == "Eastern")
            $('select#selTimeZone')[0].selectedIndex = 4;
        $('select#selTimeZone').selectmenu('refresh', true);

        $('#liConfigureController').html(Controller.Name);
        $('#lblConfigMAC').html('MAC Address: ' + Controller.MACAddress);
        $('#lblConfigVersion').html('Version: ' + Controller.Version);
    }
});



</script>
</body>
</html>
